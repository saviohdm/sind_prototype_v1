<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SIND Dashboard (Vanilla)</title>
  <style>
    :root{
      --bg: #f9fafb;            /* cinza claro */
      --text: #1f2937;          /* cinza-escuro */
      --muted: #6b7280;         /* cinza */
      --muted-2:#9ca3af;
      --white:#ffffff;
      --red-900:#7f1d1d;
      --red-800:#991b1b;
      --red-700:#b91c1c;
      --red-50:#fef2f2;
      --border:#e5e7eb;
      --card:#ffffff;
      --green:#16a34a;
      --red:#dc2626;
      --shadow: 0 10px 20px rgba(0,0,0,.04), 0 2px 6px rgba(0,0,0,.06);
      --radius-lg: 12px;
      --radius-xl: 16px;
      --gap: 24px;
    }

    /* Reset básico */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:var(--bg);
    }
    img{display:block; max-width:100%; height:auto}
    h1,h2{margin:0 0 .5rem}

    /* Layout principal */
    .layout{
      display:grid;
      grid-template-columns: 260px 1fr;
      min-height:100vh;
      background:var(--bg);
    }
    aside{
      background:var(--red-900);
      color:var(--white);
      padding:24px;
      display:flex;
      flex-direction:column;
      gap:24px;
    }
    .brand{
      display:flex; align-items:center; gap:8px;
      font-weight:700; font-size:18px;
    }
    nav{display:flex; flex-direction:column; gap:12px}
    .nav-item{
      display:flex; align-items:center; gap:12px;
      padding:10px 12px; border-radius:10px; cursor:pointer;
      transition: background .2s ease;
      user-select:none;
    }
    .nav-item:hover{ background:var(--red-800) }
    .nav-item svg, .stat svg, .meta svg{ width:16px; height:16px; flex:0 0 16px }

    main{
      padding:40px;
      display:flex; flex-direction:column; gap:40px;
    }

    /* Cabeçalho */
    .header{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px;
    }
    .title{ font-size:28px; font-weight:800; color:#111827 }

    /* Botões */
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px; font-weight:600; border:1px solid transparent;
      padding:10px 18px; border-radius:14px; cursor:pointer;
      transition: background .2s, border-color .2s, color .2s, transform .02s;
      background:var(--red-700); color:var(--white); box-shadow:var(--shadow);
      text-decoration: none; /* Adicione esta linha */
    }
    .btn:hover{ background:var(--red-800) }
    .btn:active{ transform:translateY(1px) }
    .btn--outline{
      background:var(--white); color:var(--red-700);
      border-color:var(--red-700); box-shadow:none;
      text-decoration: none;
    }
    .btn--outline:hover{ background:var(--red-50) }

    /* Card genérico */
    .card{
      background:var(--card); border:1px solid var(--border);
      border-radius:var(--radius-xl); box-shadow:var(--shadow);
      overflow:hidden;
    }
    .card__content{ padding:16px 16px 20px }

    /* Títulos seção */
    .section-title{
      font-weight:700; font-size:20px; color:#374151; margin-bottom:12px;
      display:flex; align-items:center; gap:8px;
    }

    /* Tabela */
    .table-wrap{ border-radius:var(--radius-lg); overflow:auto; border:1px solid var(--border) }
    table{ width:100%; border-collapse:collapse; font-size:14px; background:var(--white) }
    thead th{
      text-align:left; padding:12px; background:#f3f4f6; color:#4b5563; font-weight:600;
      position:sticky; top:0; z-index:1;
    }
    tbody td{ padding:12px; border-top:1px solid var(--border) }
    tbody tr:hover{ background:#fafafa }

    .status{
      display:inline-flex; align-items:center; gap:6px;
    }
    .dot{
      display:inline-block; width:8px; height:8px; border-radius:999px;
      background:currentColor;
    }
    .status--ok{ color:var(--green) }
    .status--err{ color:var(--red) }

    .right{ text-align:right; margin-top:12px }

    /* Grid inferior (duas colunas) */
    .grid-2{
      display:grid; grid-template-columns: 1fr 1fr; gap:32px;
    }

    /* Estatísticas */
    .stats{
      display:grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap:16px;
      text-align:center;
    }
    .stat{
      background:var(--white); border:1px solid var(--border);
      border-radius:14px; padding:16px; box-shadow:0 1px 0 rgba(0,0,0,.02);
    }
    .stat .label{ font-size:12px; color:var(--muted) }
    .stat .value{ font-size:24px; font-weight:800; color:#111827; margin-top:4px }
    .meta{
      font-size:14px; font-weight:600; color:#374151;
      display:flex; align-items:center; justify-content:center; gap:6px;
    }

    .divider{ height:1px; background:var(--border); margin:8px 0 12px }

    /* Responsividade */
    @media (max-width: 1024px){
      .layout{ grid-template-columns: 220px 1fr }
    }
    @media (max-width: 840px){
      .layout{ grid-template-columns: 1fr }
      aside{ position:sticky; top:0; z-index:10; border-bottom:1px solid rgba(255,255,255,.1) }
      .grid-2{ grid-template-columns: 1fr; }
      main{ padding:24px }
    }
  </style>
</head>
<body>
  <div class="layout">

    <!-- Sidebar -->
    <aside>
      <div class="brand">
        <img src="/image.png" alt="CNMP" style="width:100px; height:auto" />
        <span>SIND</span>
      </div>

      <nav>
        <div class="nav-item" onclick="window.location.href='index.html'">
          <!-- Início -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 12L12 4l8 8"/>
            <path d="M4 12v8h16v-8"/>
          </svg>
          <span>Início</span>
        </div>
        <div class="nav-item" onclick="window.location.href='novo.html'">
          <!-- Novo Procedimento -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="16"/>
            <line x1="8" y1="12" x2="16" y2="12"/>
          </svg>
          <span>Novo Procedimento</span>
        </div>
        <div class="nav-item" onclick="window.location.href='acervo.html'">
          <!-- Acervo -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="7" width="18" height="13" rx="2"/>
            <path d="M3 7V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v2"/>
          </svg>
          <span>Acervo</span>
        </div>
        <div class="nav-item" onclick="window.location.href='consulta.html'">
          <!-- Consulta -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          <span>Consulta</span>
        </div>
        <div class="nav-item" onclick="window.location.href='mensagens.html'">
          <!-- Mensagens -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="7" width="18" height="10" rx="2"/>
            <polyline points="3 7 12 13 21 7"/>
          </svg>
          <span>Mensagens</span>
        </div>
        <div class="nav-item" onclick="window.location.href='estatistica.html'">
          <!-- Estatísticas -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="12" width="4" height="8"/>
            <rect x="10" y="8" width="4" height="12"/>
            <rect x="17" y="4" width="4" height="16"/>
          </svg>
          <span>Estatísticas</span>
        </div>
      </nav>

      <!-- Botão de logout fixado ao final do menu lateral -->
<a
  href="login.html"
  class="btn btn--outline"
  title="Encerrar sessão"
  aria-label="Sair"
  style="margin-top:auto; width:100%; justify-content:flex-start; gap:10px;"
>
  <!-- ícone logout -->
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" style="width:16px;height:16px;">
    <path d="M16 17l5-5-5-5"/>
    <path d="M21 12H9"/>
    <path d="M13 5v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-2"/>
  </svg>
  <span>Sair</span>
</a>
    </aside>

    <!-- Main -->
    <main>
      <header class="header">
        <h1 class="title">Bem-vinda, Fernanda</h1>
        <a href="novo.html" class="btn" type="button">Novo Procedimento</a>
      </header>

      <!-- Acervo -->
      <section>
        <h2 class="section-title">Acervo do MPRO - recentes</h2>
        <div class="card">
          <div class="card__content">
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Número</th>
                    <th>Envolvido</th>
                    <th>Classe</th>
                    <th>Situação</th>
                    <th>Último Andamento</th>
                  </tr>
                </thead>
                <tbody>
                  <tr onclick="window.location.href='detalhes.html'" style="cursor:pointer;">
                    <td>003.9.1234567/2025</td>
                    <td>Adoniran Barbosa</td>
                    <td>Reclamação</td>
                    <td>
                      <span class="status status--ok">
                        <span class="dot" aria-hidden="true"></span> Em andamento
                      </span>
                    </td>
                    <td>01/12/2024</td>
                  </tr>
                  <tr onclick="window.location.href='detalhes.html'" style="cursor:pointer;">
                    <td>003.9.532343/2025</td>
                    <td>Milton Melo</td>
                    <td>Notícia de Fato</td>
                    <td>
                      <span class="status status--ok">
                        <span class="dot" aria-hidden="true"></span> Em andamento
                      </span>
                    </td>
                    <td>17/05/2024</td>
                  </tr>
                  <tr onclick="window.location.href='detalhes.html'" style="cursor:pointer;">
                    <td>003.9.5234534/2025</td>
                    <td>Carmen Miranda</td>
                    <td>Reclamação</td>
                    <td>
                      <span class="status status--ok">
                        <span class="dot" aria-hidden="true"></span> Em andamento
                      </span>
                    </td>
                    <td>12/09/2025</td>
                  </tr>
                  <tr onclick="window.location.href='detalhes.html'" style="cursor:pointer;">
                    <td>003.9.736453/2025</td>
                    <td>Álvares Cabral</td>
                    <td>Procedimento Administrativo Disciplinar</td>
                    <td>
                      <span class="status status--ok">
                        <span class="dot" aria-hidden="true"></span> Em andamento
                      </span>
                    </td>
                    <td>09/08/2024</td>
                  </tr>
                  <tr onclick="window.location.href='detalhes.html'" style="cursor:pointer;">
                    <td>003.9.1234567/2025</td>
                    <td>Rebeca Ramos</td>
                    <td>Notícia de Fato</td>
                    <td>
                      <span class="status status--err">
                        <span class="dot" aria-hidden="true"></span> Encerrado
                      </span>
                    </td>
                    <td>12/12/2024</td>
                  </tr>
                </tbody>
              </table>
            </div>
              <!---
              <div class="right">
                <a href="acervo.html" class="btn btn--outline">Ver mais</a>
              </div>
              -->
          </div>
        </div>
      </section>

      <!-- Mensagens + Estatísticas -->
      <section class="grid-2">


        <!-- Procedimentos com maior duração -->
        <div class="card">
          <div class="card__content">
            <h2 class="section-title">
              <!-- sino -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 1 0-12 0v3.2c0 .5-.2 1-.6 1.4L4 17h5"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
              </svg>
              Procedimentos com maior duração
            </h2>

            <div class="table-wrap" style="margin-top:12px;">
              <table>
                <thead>
                  <tr>
                    <th>Número</th>
                    <th>Duração (dias)</th>
                  </tr>
                </thead>
                <tbody id="t-maior-duracao"></tbody>
              </table>
            </div>

            <div class="right">
              <a href="#" class="btn btn--outline">Ver mais</a>
            </div>
          </div>
        </div>

        
        <!-- Mensagens -->
        
        <!--
        <div class="card">
          <div class="card__content">
            <h2 class="section-title">
            -->

              <!-- sino -->
              <!--
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 1 0-12 0v3.2c0 .5-.2 1-.6 1.4L4 17h5"/>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
              </svg>
              Procedimentos em andamento com maior duração
            </h2>

            <div class="divider"></div>

            <div>
              <p style="font-weight:600; color:#1f2937">⏳ Procedimento XXXXX Pendente</p>
              <p style="font-size:12px; color:var(--muted-2)">há 2 dias</p>
            </div>

            <div class="divider"></div>

            <div>
              <p style="font-weight:600; color:#1f2937">✍️ Novo Procedimento Assinalado</p>
              <p style="font-size:12px; color:var(--muted-2)">há 1 dia</p>
            </div>

            <div class="divider"></div>

            <div>
              <p style="font-weight:600; color:#1f2937">🔄 Procedimento Atualizado</p>
              <p style="font-size:12px; color:var(--muted-2)">hoje</p>
            </div>

            <div class="right">
              <a href="#" class="btn btn--outline">Ver mais</a>
            </div>
          </div>
        </div>
      -->
        




        <!-- Estatísticas -->
        <div class="card">
          <div class="card__content">
            <h2 class="section-title">
              <!-- trending-up -->
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M3 3v18h18"/>
                <path d="M19 9l-5 5-4-4-6 6"/>
              </svg>
              Estatísticas
            </h2>

            <div class="stats">
              <div class="stat">
                <div class="label">Total</div>
                <div class="value">50</div>
              </div>
              <div class="stat">
                <div class="label">Em Andamento</div>
                <div class="value">12</div>
              </div>
              <div class="stat">
                <div class="label">Última Edição</div>
                <div class="value">
                  <!-- clock -->
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-label="Última edição" aria-hidden="false">
                    <circle cx="12" cy="12" r="9"></circle>
                    <path d="M12 7v5l3 3"></path>
                  </svg>
                  <span>10-07-2025</span>
                </div>
              </div>
              <div class="stat">
                <div class="label">Próxima Prescrição</div>
                <div class="value">
                  <!-- clock -->
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-label="Próxima Prescrição" aria-hidden="false">
                    <circle cx="12" cy="12" r="9"></circle>
                    <path d="M12 7v5l3 3"></path>
                  </svg>
                  <span>15-11-2025</span>
                </div>
              </div>
            </div>

            <div class="right">
              <a href="#" class="btn btn--outline">Ver mais</a>
            </div>
          </div>
        </div>

      </section>
    </main>
  </div>

  


  <script>
  (function () {
    // 1) Localiza o tbody da tabela do "Acervo do MPRO - recentes"
    // Procura o <h2.section-title> que contém "Acervo do MPRO" e pega o primeiro <tbody> de tabela dentro da mesma seção
    const acervoTitleEls = Array.from(document.querySelectorAll('h2.section-title'));
    const acervoTitleEl = acervoTitleEls.find(el => /Acervo do MPRO/i.test(el.textContent || ''));
    if (!acervoTitleEl) return;

    const acervoSection = acervoTitleEl.closest('section');
    if (!acervoSection) return;

    const acervoTbody = acervoSection.querySelector('table tbody');
    const duracaoTbody = document.getElementById('t-maior-duracao');
    if (!acervoTbody || !duracaoTbody) return;

    // 2) Função para parsear datas no formato DD/MM/AAAA
    function parseBRDate(str) {
      const [d, m, y] = (str || '').split('/').map(s => parseInt(s, 10));
      if (!d || !m || !y) return null;
      // Date: meses começam em 0 no JS
      return new Date(y, m - 1, d);
    }

    // 3) Calcula dias parados (0 se a data é futura)
    function diasParados(ultimaData) {
      const hoje = new Date();
      // zera horas pra cálculo só em dias
      hoje.setHours(0,0,0,0);
      if (!ultimaData) return 0;
      const diffMs = hoje.getTime() - ultimaData.getTime();
      const diffDias = Math.floor(diffMs / (1000 * 60 * 60 * 24));
      return diffDias < 0 ? 0 : diffDias;
    }

    // 4) Lê cada linha do acervo e monta { numero, duracaoEmDias }
    const linhas = Array.from(acervoTbody.querySelectorAll('tr'));
    const registros = linhas.map(tr => {
      const tds = tr.querySelectorAll('td');
      const numero = tds?.[0]?.textContent?.trim() || '';
      const dataUltimoAndamentoStr = tds?.[4]?.textContent?.trim() || '';
      const dataUltimoAndamento = parseBRDate(dataUltimoAndamentoStr);
      const duracao = diasParados(dataUltimoAndamento);
      return { numero, duracao };
    });

    // 5) Ordena por duração (desc) e pega os 5 primeiros
    registros.sort((a, b) => b.duracao - a.duracao);
    const top5 = registros.slice(0, 5);

    // 6) Renderiza no tbody da nova tabela
    duracaoTbody.innerHTML = top5.map(item => `
      <tr>
        <td>${item.numero}</td>
        <td>${item.duracao}</td>
      </tr>
    `).join('');
  })();
</script>

  <script>
    // Remova ou comente esta linha:
    // document.querySelector('.btn')?.addEventListener('click', () => {
    //   alert('Abrir fluxo de “Novo Procedimento”.');
    // });
  </script>
</body>
</html>
